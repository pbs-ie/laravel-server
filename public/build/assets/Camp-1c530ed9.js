import{r as s,a as e,j as i,F as C}from"./app-8ad4302f.js";import{L as A}from"./logo-icon-e7f81caf.js";import{P as I,a as D}from"./PaymentSuccessComponent-2b7ed606.js";import{S as R}from"./SecondaryButton-acbdc118.js";import{P as E}from"./PrimaryButton-b23a8877.js";import{C as L}from"./CampWrapper-77559425.js";import{H as O}from"./Heading1Alt-c41ae707.js";import"./WrapperLayout-9c24c2d1.js";import"./Paragraph-89c3cd24.js";import"./Loader-f2cca895.js";import"./CheckBadge-df0dd088.js";import"./BasicButton-7e07839f.js";import"./helper-5cdff9d5.js";const F=[{title:"General",quantity:0,price:30},{title:"2 in family",quantity:0,price:60}],H=(r,t)=>{let a=[];switch(t.type){case"increase":return[...r].map((n,u)=>u===t.index?{title:n.title,quantity:n.quantity+1,price:n.price}:n);case"decrease":return[...r].map((n,u)=>u===t.index&&n.quantity>1?{title:n.title,quantity:n.quantity-1,price:n.price}:n);case"selected":return a=[...r],a[t.index].quantity=1,a;default:return r}},f=[{id:0,quantity:1,value:0}],V=(r,t)=>{switch(t.type){case"setItem":return[{id:t.id,quantity:t.quantity,value:t.value}];case"changeValue":return[...r].map(a=>a.id===t.id&&t.quantity&&t.value?{id:t.id,quantity:t.quantity,value:t.value}:a);case"addItem":return t.quantity&&t.value?[...r,{id:r.length,quantity:t.quantity,value:t.value}]:r;case"removeItem":return r.length===1?f:r.filter(a=>a.id!==t.id);case"resetCart":return f;default:return r}};function $(){const[r,t]=s.useState(null),[a,n]=s.useState(""),[u,m]=s.useState(!0),[y,o]=s.useState(""),[x,N]=s.useState(!1),[b,d]=s.useReducer(V,f),[p,q]=s.useReducer(H,F),g=l=>{l!==r&&(n(""),l===4?d({type:"resetCart",id:0,quantity:0,value:0}):q({type:"selected",index:l}),t(l))},S=l=>{l.target&&n(l.target.value.replace(/^0+/,""))},P=()=>{if(o(""),r===null||r===4&&a===""){m(!0),o("Please select or enter an amount to send");return}d(a!==""?{type:"setItem",id:0,quantity:1,value:Number(a)}:{type:"setItem",id:0,quantity:p[r].quantity,value:p[r].price}),m(!1)},B=(l,c)=>u?(console.error("Values not set"),o("Please select or enter an amount to send"),c.reject()):c.resolve(),j=()=>{if(r===4)return e("div",{className:"w-full h-10 mb-4",children:i("p",{className:"flex items-center w-full transition ease-in-out border border-gray-400 rounded-md shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:shadow-md focus-within:shadow-indigo-500",children:[e("span",{className:"ml-4 font-normal pointer-events-none",children:"€"}),e("input",{className:"w-full border-0 rounded-md focus:ring-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",type:"number",name:"price",id:"price",value:a,onChange:S,placeholder:"Please enter an amount"})]})})},k=()=>b.reduce((l,c)=>l+c.value*c.quantity,0),v=()=>{d({type:"resetCart",id:0,quantity:0,value:0}),o(""),t(null),m(!0)};return s.useEffect(()=>{v()},[]),e(L,{title:"Payment",children:i("div",{className:"mx-auto",children:[e(O,{children:"Summer Camp Payment"}),e("div",{className:"flex justify-center flex-col w-3/4 mx-auto my-10",children:i("div",{className:"flex flex-col items-center mx-auto w-full gap-2 p-8 mb-5 border border-gray-300 rounded-md lg:w-2/3",children:[e("div",{className:"inline-flex justify-center w-full px-6",children:e("img",{src:A,alt:"Postal Bible School Logo",className:"my-4 h-14"})}),e("h2",{className:"text-3xl",children:"Postal Bible School"}),!x&&i(C,{children:[i("p",{className:"px-10 mb-5 text-xl",children:["You can pay the deposit for Summer Camp 2024 to ",e("br",{})," Postal Bible School here"]}),u&&i("div",{children:[i("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[p.map(({title:l,quantity:c,price:w},h)=>e("button",{onClick:()=>g(h),className:"flex flex-col justify-center items-center p-2 px-6 border border-gray-300 rounded-md shadow-md"+(r===h?" bg-blue-800 text-white":""),children:w&&i(C,{children:[e("p",{className:"text-lg font-bold before:content-['€']",children:w}),e("p",{className:"capitalize",children:l})]})},h+"product")),e("button",{onClick:()=>g(4),className:"flex flex-col justify-center items-center p-2 px-6 border border-gray-300 rounded-md shadow-md"+(r===4?" bg-blue-800 text-white":""),children:e("p",{className:"text-lg font-bold",children:"Custom"})})]}),j(),e("div",{className:"flex justify-end w-full",children:e(E,{onClick:()=>P(),children:"Continue"})})]}),!u&&i("div",{className:"w-full lg:max-w-2xl",children:[i("div",{children:[e("p",{className:"mb-2",children:"You have selected to pay"}),i("p",{className:"mb-4 text-xl md:text-4xl",children:["€",k()]}),e(R,{onClick:()=>v(),children:"Change Amount"})]}),e("hr",{className:"w-1/2 h-px mx-auto my-8 bg-gray-200 border-0 dark:bg-gray-700"}),e("div",{className:"py-4 lg:px-8",children:e(I,{setSuccess:N,setErrorMessage:o,onClick:B,cart:b,cartDescription:"Payment for PBS Camp"})})]}),e("div",{className:"w-full lg:max-w-2xl",children:y&&e("p",{className:"text-red-500",children:y})})]}),x&&e(D,{})]})})]})})}export{$ as default};
