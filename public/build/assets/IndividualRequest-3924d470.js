import{r as v,q as B,W as $,a as e,j as s,b as x}from"./app-8ad4302f.js";import{G as E,C as Y}from"./GroupLabel-511b2312.js";import{I as p}from"./InputLabel-75ea13e0.js";import{T as j}from"./TextAreaInput-ea0f08d7.js";import{T as n}from"./TextInput-91b918b0.js";import{T as M}from"./ToastBanner-12bc069a.js";import{P as T}from"./PrimaryButton-b23a8877.js";import{S as w}from"./SecondaryButton-acbdc118.js";import{H as A}from"./Heading1Alt-c41ae707.js";import{W as P}from"./WrapperLayout-9c24c2d1.js";import{I as R}from"./InputError-3fbf0059.js";import"./SelectInput-871f02e3.js";import"./BasicButton-7e07839f.js";import"./helper-5cdff9d5.js";import"./Paragraph-89c3cd24.js";import"./logo-icon-e7f81caf.js";function te(){const h=[{firstname:"",lastname:"",day:"",month:"",year:""}],D=(a,t)=>{if(t.type==="changeValue"&&"name"in t){let c=[...a];return c[t.idx][t.name]=t.value+"",c}else return t.type==="addValue"?[...a,...h]:t.type==="removeValue"?a.length===1?h:a.slice(0,a.length-1):a},[r,f]=v.useReducer(D,h),[i,S]=v.useState([!1]),{errors:b}=B().props,{data:m,setData:C,post:q,processing:F,reset:L,transform:k}=$({studentDetails:[{firstname:"",lastname:"",dob:""}],email:"",phone:"",address1:"",address2:"",city:"",state:"",postcode:"",country:"",message:""});v.useEffect(()=>{L()},[]);const d=a=>{switch(a.target.name){case"email":case"phone":case"address1":case"address2":case"city":case"state":case"postcode":case"country":case"message":C(a.target.name,a.target.value)}},u=(a,t)=>{if(t.target instanceof HTMLInputElement)switch(t.target.name){case"firstname":case"lastname":case"day":case"month":case"year":f({type:"changeValue",name:t.target.name,value:t.target.value,idx:a});break}},y=a=>{let t=[...i];r[a].day!==""&&(isNaN(+r[a].day)||+r[a].day<1||+r[a].day>31)||r[a].month!==""&&(isNaN(+r[a].month)||+r[a].month<1||+r[a].month>12)||r[a].year!==""&&(isNaN(+r[a].year)||+r[a].year<1900||+r[a].year>=new Date().getFullYear())?t[a]=!0:t[a]=!1,console.log("Setting showDateError",i[a]),S(t)},I=a=>{a.preventDefault();let t=[];r.forEach(({firstname:c,lastname:N,day:g,month:l,year:o})=>{t.push({firstname:c,lastname:N,dob:new Date(Number(o),Number(l)-1,Number(g)).toISOString().slice(0,10)})}),C("studentDetails",t),k(c=>({...c,studentDetails:t})),q(route("request.individual"))};return e(P,{children:s("div",{className:"px-4 py-12 mx-auto text-center shadow-sm max-w-7xl sm:px-6 lg:px-8",children:[e(x,{title:"Request Sample Lessons"}),e(A,{children:"Request Lesson for an Individual"}),b&&Object.keys(b).map(a=>e(M,{message:b[a]},a)),s("form",{"aria-label":"Individual lesson request form",name:"individualForm",method:"post",onSubmit:I,className:"max-w-screen-md mx-auto",children:[e("h2",{className:"flex mb-4 text-lg font-bold",children:"Student Details"}),s("div",{className:"flex flex-col gap-4 pb-3 mb-8 border-b border-gray-600",children:[r.map(({firstname:a,lastname:t,day:c,month:N,year:g},l)=>s("div",{className:"flex flex-col gap-2 mb-2",children:[s("div",{className:"flex gap-2",children:[e(p,{id:"fullname"+(l+1),forInput:`firstname[${l}]`,value:"Name "+(l+1),className:"basis-1/3",required:!0}),s("div",{className:"inline-flex gap-2 basis-2/3",children:[s("label",{htmlFor:`firstname[${l}]`,className:"hidden",children:["First Name for ",l+1]}),e(n,{type:"text",name:"firstname",id:`firstname[${l}]`,value:a,placeholder:"First Name",className:"block w-full",autoComplete:"given-name",handleChange:o=>u(l,o),ariaLabelledBy:"fullname"+(l+1),required:!0}),s("label",{htmlFor:`lastname[${l}]`,className:"hidden",children:["Last Name for ",l+1]}),e(n,{type:"text",name:"lastname",id:`lastname[${l}]`,value:t,placeholder:"Last Name",className:"block w-full",autoComplete:"family-name",handleChange:o=>u(l,o),ariaLabelledBy:"fullname"+(l+1),required:!0})]})]}),s("div",{className:"inline-flex flex-wrap items-start gap-2 md:flex-nowrap",children:[e(p,{forInput:`day[${l}]`,value:`Date of Birth ${l+1}`,className:"basis-1/3",required:!0}),s("div",{className:"flex flex-col",children:[s("div",{className:"flex justify-start gap-2 basis-2/3",children:[s("div",{className:"flex flex-col items-start",children:[e("label",{htmlFor:`day[${l}]`,children:"Day (DD):"}),e(n,{type:"text",name:"day",id:`day[${l}]`,value:c,className:"w-24",placeholder:"DD",autoComplete:"on",handleChange:o=>u(l,o),onBlur:o=>y(l),required:!0})]}),s("div",{className:"flex flex-col items-start",children:[e("label",{htmlFor:`month[${l}]`,children:"Month (MM):"}),e(n,{type:"text",name:"month",id:`month[${l}]`,value:N,className:"w-24",placeholder:"MM",autoComplete:"on",handleChange:o=>u(l,o),onBlur:o=>y(l),required:!0})]}),s("div",{className:"flex flex-col items-start",children:[e("label",{htmlFor:`year[${l}]`,children:"Year (YYYY):"}),e(n,{type:"text",name:"year",id:`year[${l}]`,value:g,className:"w-40",placeholder:"YYYY",autoComplete:"on",handleChange:o=>u(l,o),onBlur:o=>y(l),required:!0})]})]}),i&&i[l]&&e(R,{message:"Please enter a valid date",className:"mt-2 bg-red-100"})]})]})]},l)),s("div",{className:"flex justify-end gap-2",children:[e(w,{onClick:()=>f({type:"addValue"}),className:"my-2 before:content-['+'] before:pr-1 before:text-lg",children:"Add Student"}),e(w,{onClick:()=>f({type:"removeValue"}),className:"my-2 before:content-['-'] before:pr-1 before:text-lg",children:"Remove Student"})]})]}),e("h2",{className:"flex mb-4 text-lg font-bold",children:"Contact Details"}),s("div",{className:"grid mb-5 items-start grid-cols-[1fr_2fr] gap-2",children:[e(p,{forInput:"email",value:"Email",required:!0}),e(n,{type:"email",name:"email",id:"email",value:m.email,className:"block w-full",autoComplete:"email",handleChange:d,required:!0}),e(p,{forInput:"phone",value:"Phone"}),e(n,{type:"text",name:"phone",id:"phone",value:m.phone,className:"block w-full",autoComplete:"phone",handleChange:d}),e(E,{id:"address",value:"Address",required:!0}),s("div",{className:"grid grid-cols-2 gap-2",children:[e("label",{id:"address1label",htmlFor:"address1",className:"hidden",children:"Field 1"}),e(n,{type:"text",name:"address1",id:"address1",value:m.address1,placeholder:"Street Address",className:"block w-full col-span-2",autoComplete:"on",handleChange:d,ariaLabelledBy:"address address1label"}),e("label",{id:"address2label",htmlFor:"address2",className:"hidden",children:"Field 2"}),e(n,{type:"text",name:"address2",id:"address2",value:m.address2,placeholder:"Address Line 2",className:"block w-full col-span-2",autoComplete:"on",handleChange:d,ariaLabelledBy:"address address2label"}),e("label",{id:"citylabel",htmlFor:"city",className:"hidden",children:"City"}),e(n,{type:"text",name:"city",id:"city",value:m.city,placeholder:"City",className:"block w-full",autoComplete:"on",handleChange:d,ariaLabelledBy:"address citylabel"}),e("label",{id:"statelabel",htmlFor:"state",className:"hidden",children:"State"}),e(n,{type:"text",name:"state",id:"state",value:m.state,placeholder:"State",className:"block w-full",autoComplete:"on",handleChange:d,ariaLabelledBy:"address statelabel"}),e("label",{id:"postcodelabel",htmlFor:"postcode",className:"hidden",children:"Postcode"}),e(n,{type:"text",name:"postcode",id:"postcode",value:m.postcode,placeholder:"Postcode",className:"block w-full",autoComplete:"on",handleChange:d,ariaLabelledBy:"address postcode"}),e("label",{htmlFor:"country",className:"hidden",children:"Country"}),e(Y,{value:m.country,handleChange:d})]}),e(p,{forInput:"message",value:"Message or Comment"}),e(j,{name:"message",id:"message",value:m.message,className:"block w-full",handleChange:d,rows:4})]}),s("div",{className:"inline-flex justify-center w-full gap-2 mt-5 md:justify-end",children:[e(w,{onClick:()=>window.history.back(),children:"Go Back"}),e(T,{type:"submit",className:"w-1/3",processing:F||i.filter(a=>a===!0).length>0,children:"Request a Lesson"})]})]})]})})}export{te as default};
