import{r as g,q as L,W as j,a as e,j as r}from"./app-8ad4302f.js";import{B as S}from"./ButtonLink-f44abe41.js";import{P as E}from"./PrimaryButton-b23a8877.js";import{S as N}from"./SecondaryButton-acbdc118.js";import{F as R}from"./FileInput-fade086c.js";import{I as d}from"./InputLabel-75ea13e0.js";import{T as o}from"./TextInput-91b918b0.js";import{T as U}from"./ToastBanner-12bc069a.js";import{C as B}from"./ContentWrapper-a6e648cb.js";import{W as V}from"./WrapperLayout-9c24c2d1.js";import"./helper-5cdff9d5.js";import"./Paragraph-89c3cd24.js";import"./BasicButton-7e07839f.js";import"./Heading1-dc635c5b.js";import"./logo-icon-e7f81caf.js";function _({videoData:l}){const C=l.content,f=[{title:"",externalUrl:"",duration:"",id:""}],v=(t,a)=>{if(a.type==="changeValue"&&"name"in a){let s=[...t];return s[a.idx][a.name]=a.value+"",s}else{if(a.type==="addValue")return[...t,...f];if(a.type==="removeValue"&&"idx"in a){if(t.length===1)return f;let s=[...t];return s.splice(a.idx,1),s}else return t}},[u,b]=g.useReducer(v,C),{errors:h}=L().props,{data:i,setData:p,post:w,reset:I,processing:T}=j({monthTitle:l.monthTitle,month:l.month,series:l.series,routename:l.routename,imageFile:l.imageFile,imageLink:l.imageLink,content:l.content}),x=t=>{switch(t.target.name){case"monthTitle":case"month":case"series":case"routename":p(t.target.name,t.target.value)}},k=t=>{t.target.name==="imageFile"&&t.target.files&&p(t.target.name,t.target.files[0])},c=(t,a)=>{if(a.target instanceof HTMLInputElement)switch(a.target.name){case"title":case"externalUrl":case"duration":case"id":b({type:"changeValue",name:a.target.name,value:a.target.value,idx:t});break}},y=t=>{b(t)},F=t=>{t.preventDefault(),w(route("assembly.update",l.id))};return g.useEffect(()=>{I()},[]),g.useEffect(()=>{p("content",[...u])},[u]),e(V,{children:r(B,{title:"Edit Assembly",children:[h&&Object.keys(h).map(t=>e(U,{message:h[t]},t)),r("form",{method:"post",onSubmit:F,className:"flex flex-col items-start gap-4 px-10 py-5 border w-fit",children:[e("h2",{className:"p-0 mb-2 text-xl font-bold text-black",children:"Basic Information"}),r("div",{className:"flex flex-col gap-4 mb-4",children:[r("div",{className:"inline-flex gap-2",children:[e(d,{forInput:"monthTitle",value:"Title",required:!0}),e(o,{type:"text",name:"monthTitle",id:"monthTitle",value:i.monthTitle,className:"",handleChange:x,required:!0})]}),r("div",{className:"inline-flex gap-2",children:[e(d,{forInput:"month",value:"Month",required:!0}),e(o,{type:"text",name:"month",id:"month",value:i.month,className:"",handleChange:x,required:!0}),e("p",{className:"text-gray-600",children:'//Full month name. E.g. "January"'})]}),r("div",{className:"inline-flex items-end gap-2",children:[e(d,{forInput:"series",value:"series",required:!0}),e("input",{type:"text",name:"series",id:"series",value:i.series,className:"border-gray-400 bg-clip-padding bg-neutral-100 text-neutral-500 rounded-md shadow-sm transition ease-in-out self-center",disabled:!0}),e("p",{className:"text-gray-600",children:"//Should not be changed as it will break the association. Create a new assembly if you need to change it."})]}),r("div",{className:"inline-flex items-end gap-2",children:[e(d,{forInput:"routename",value:"routename",required:!0}),e("input",{type:"text",name:"routename",id:"routename",value:i.routename,className:"border-gray-400 bg-clip-padding bg-neutral-100 text-neutral-500 rounded-md shadow-sm transition ease-in-out self-center",required:!0,disabled:!0}),e("p",{className:"text-gray-600",children:"//Should not be changed as it will break the association. Create a new assembly if you need to change it."})]}),r("div",{className:"inline-flex gap-2",children:[e(d,{forInput:"imageFile",value:"Thumbnail Image"}),e(R,{name:"imageFile",id:"imageFile",className:"",handleChange:k,accept:"image/png"})]}),e("img",{className:"w-60",src:i.imageFile?URL.createObjectURL(i.imageFile):i.imageLink})]}),e("h2",{className:"p-0 mb-2 text-xl font-bold text-black",children:"Video Information"}),e("p",{className:"text-gray-600",children:"Change the ID number to change order of video. Be careful of the maximum number of videos"}),r("table",{children:[e("thead",{children:r("tr",{children:[e("th",{children:"ID"}),e("th",{children:"External URL"}),e("th",{children:"Title"}),e("th",{children:"Duration"}),e("th",{children:e(N,{onClick:()=>y({type:"addValue"}),className:"before:content-['+'] before:pr-1 before:text-lg bg-green-200",children:"Add Row"})})]})}),e("tbody",{children:u.map(({title:t,externalUrl:a,duration:s,id:q},n)=>r("tr",{children:[e("td",{children:e(o,{type:"text",name:"id",id:`id${n}`,value:q,className:"",handleChange:m=>c(n,m),required:!0})}),e("td",{children:e(o,{type:"text",name:"externalUrl",id:`externalUrl${n}`,value:a,className:"",handleChange:m=>c(n,m),required:!0})}),e("td",{children:e(o,{type:"text",name:"title",id:`title${n}`,value:t,className:"",handleChange:m=>c(n,m),required:!0})}),e("td",{children:e(o,{type:"text",name:"duration",id:`duration${n}`,value:s,className:"",handleChange:m=>c(n,m)})}),e("td",{children:e(N,{onClick:()=>y({type:"removeValue",idx:n}),className:"bg-red-200 before:content-['-'] before:pr-1 before:text-lg",children:"Remove Row"})})]},"contenttable"+n))})]}),r("div",{className:"inline-flex justify-center w-full gap-2 mt-5 md:justify-end",children:[e(S,{hierarchy:"secondary",href:route("assembly.admin"),children:"Cancel"}),e(E,{type:"submit",className:"w-60",processing:T,children:"Update"})]})]})]})})}export{_ as default};
